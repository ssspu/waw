# 文档同步维护指南

**目的**: 确保项目文档与代码保持同步
**范围**: 页面、组件结构性变更
**维护频率**: 实时同步（每次修改后）

---

## 📚 文档体系

### 核心文档

| 文档名 | 位置 | 维护内容 | 更新频率 |
|--------|------|---------|---------|
| **PROJECT_STRUCTURE.md** | 项目根目录 | 整体架构、页面列表、组件分类 | 实时 |
| **DOCUMENTATION_SYNC_GUIDE.md** | 项目根目录 | 维护流程和规范 | 按需 |

---

## 🔄 同步规则

### 1. 新增页面时

**操作步骤**:

1. 在 `pages/` 下创建新页面文件夹和 `index.vue`
2. 在 `pages.json` 中添加路由配置
3. **立即更新文档**:
   - 在 `PROJECT_STRUCTURE.md` 的 "页面详细列表" 中添加新页面
   - 更新所属模块的页面计数
   - 更新目录结构部分
   - 更新导航树部分
   - 更新"页面总数"统计

**示例提交信息**:
```
feat: 新增用户收藏列表页面

- 创建 pages/mine/favorites-list 页面
- 更新 pages.json 路由配置
- 同步 PROJECT_STRUCTURE.md 文档
```

---

### 2. 删除页面时

**操作步骤**:

1. 删除 `pages/` 下的页面文件夹
2. 从 `pages.json` 中移除路由配置
3. **立即更新文档**:
   - 从 `PROJECT_STRUCTURE.md` 中删除该页面条目
   - 更新所属模块的页面计数
   - 更新目录结构部分
   - 更新导航树部分
   - 更新"页面总数"统计

---

### 3. 页面重构时

**操作步骤**:

1. 重构页面组件和功能
2. 如果页面名称、路径或功能描述有变化，**立即更新文档**:
   - 更新页面条目中的文件名或路径
   - 更新功能描述
   - 更新导航树（如果路径改变）

**需要更新的情况**:
- 页面文件路径改变
- 页面功能描述改变
- 页面模块分类改变

---

### 4. 新增组件时

**操作步骤**:

1. 在 `components/` 或 `brand-components/` 下创建新组件
2. **立即更新文档**:
   - 更新 `PROJECT_STRUCTURE.md` 中的 "组件结构" 部分
   - 更新组件总数统计
   - 如果是新的组件类别，添加新分类说明

**组件分类指南**:
- **通用组件**: 可在多个页面使用的基础组件
- **业务组件**: 针对特定业务逻辑的组件
- **表单组件**: 表单输入相关组件
- **支付相关**: 支付功能相关组件
- **专用组件**: 特定功能模块的组件

---

### 5. 组件重构时

**操作步骤**:

1. 重构组件结构、API 或分类
2. **立即更新文档**:
   - 如果组件分类改变，更新分类信息
   - 如果组件名称或功能改变，更新组件列表

---

### 6. 新增模块时

**操作步骤**:

1. 创建新的功能模块（如: `pages/new-module/`）
2. **立即更新文档**:
   - 在 "页面详细列表" 中添加新模块部分
   - 添加模块说明表格
   - 更新目录结构（添加新模块文件夹）
   - 更新导航树（添加新模块分支）
   - 更新"功能模块"统计

**新模块部分模板**:

```markdown
### N. 模块名称 (Module Name)
**位置**: `pages/module-name/`
**页面数**: X

| 页面 | 文件名 | 功能描述 |
|------|--------|---------|
| 页面1 | page1.vue | 描述 |
| 页面2 | page2.vue | 描述 |
```

---

## 📋 更新清单模板

使用此清单确保完整更新文档：

### 新增页面更新清单
- [ ] 在 `pages.json` 中添加路由
- [ ] 更新"页面详细列表"中的模块表格
- [ ] 更新目录结构的文字表示
- [ ] 更新导航树部分
- [ ] 更新"页面总数"统计数字

### 新增组件更新清单
- [ ] 在组件列表中新增条目
- [ ] 如需要，新建组件分类
- [ ] 更新"组件总数"统计数字
- [ ] 更新"组件分类"描述

### 新增模块更新清单
- [ ] 创建新模块部分（使用模板）
- [ ] 更新目录结构树
- [ ] 更新导航树
- [ ] 更新"功能模块"统计
- [ ] 在页面总数中计入新模块页面数

---

## 🎯 最佳实践

### 1. 实时更新原则
- **不要延迟**: 修改代码后立即更新文档
- **原子操作**: 代码改动和文档更新一起提交

### 2. 保持一致性
- 使用统一的表格格式
- 遵循现有的命名规范
- 保持目录树的缩进一致

### 3. 详细的提交信息
```
type: 描述

- 代码改动
- 文档更新内容

example:
feat: 新增设计师排行榜页面

- 创建 pages/designer/ranking 页面
- 添加设计师榜单功能
- 同步 PROJECT_STRUCTURE.md (新增页面条目)
```

### 4. 定期审查
- 每周检查一次文档与代码的一致性
- 发现不同步的地方立即修正

---

## 📝 文档维护检查表

定期使用此检查表验证文档准确性：

### 月度检查
- [ ] 页面总数与实际文件数量一致
- [ ] 组件总数与实际文件数量一致
- [ ] 所有页面都在文档中记录
- [ ] 所有组件都在文档中分类
- [ ] 导航树与实际路由结构一致
- [ ] 所有模块描述仍然准确

### 文档质量检查
- [ ] 没有过期信息
- [ ] 功能描述准确
- [ ] 表格和树结构完整
- [ ] 没有重复条目
- [ ] 链接和路径都有效

---

## 🚀 自动化建议

未来可以考虑实现的自动化方案：

1. **文件检测脚本**: 自动扫描 `pages/` 和 `components/` 检查文档是否完整
2. **预提交钩子**: Git pre-commit 钩子检查代码修改是否同步了文档
3. **CI/CD 集成**: 在 CI 流程中验证文档与代码的一致性

---

## 📞 常见问题

### Q: 如果忘记更新文档怎么办？
A: 创建一个新的提交来更新文档，附上说明是之前遗漏的更新。

### Q: 文档和代码不一致时怎么办？
A: 优先以实际代码为准，立即更新文档。

### Q: 如何处理大型重构？
A:
1. 先完成所有代码改动
2. 一次性更新完整的文档
3. 创建单独的文档更新提交

### Q: 需要更新其他文档吗？
A: 根据改动范围：
- 只改变页面/组件 → 仅更新 `PROJECT_STRUCTURE.md`
- 改变架构或工作流 → 更新架构相关文档
- 改变开发规范 → 更新 `DOCUMENTATION_SYNC_GUIDE.md`

---

## 📚 相关文件

- `PROJECT_STRUCTURE.md` - 项目结构详细文档
- `pages.json` - 路由配置源文件
- `manifest.json` - 应用配置源文件

---

**创建时间**: 2025-11-26
**版本**: 1.0
**维护者**: Claude Code
